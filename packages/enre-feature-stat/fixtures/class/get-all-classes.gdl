// script

use coref::javascript::*

fn allClasses(
    oid: int,
    filePath: string,
    startLine: int,
    // Declaration/Expression
    classType: string,
) -> bool {
    let (db = JavascriptDB::load("coref_javascript_src.db")) {
        for (clz in ClassLikeDeclaration(db), sk in SyntaxKind()) {
            if (oid = clz.id &&
                filePath = clz.getLocation().getFile().getRelativePath() &&
                startLine = clz.getLocation().getStartLineNumber() &&
                clz.getKind() = sk.id &&
                classType = sk.name
            ) {
                return true
            }
        }
    }
}

fn classWithName(oid: int, className: string) -> bool {
    let (db = JavascriptDB::load("coref_javascript_src.db")) {
        for (clz in ClassLikeDeclaration(db), file in File(db)) {
            if (oid = clz.id &&
                className = forceGetName(clz.to<Node>())) {
                return true
            }
        }
    }
}

fn main() {
    output(allClasses())
    output(classWithName())
}
